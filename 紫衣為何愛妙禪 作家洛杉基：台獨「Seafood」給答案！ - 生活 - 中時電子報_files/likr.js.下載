window.AviviD = window.AviviD || {settings:{},status:{}};
AviviD.web_id = 'ctnews';
AviviD.category_id = window.avivid_category_id || '20181005000001';
AviviD.tracking_platform = 'likr';

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
(function(a,b,c,d){a.jQuery||(a=b.getElementsByTagName(c)[0]||b.getElementsByTagName("head")[0],b=b.createElement(c),b.type="text/javascript",b.src=d,a.parentNode.insertBefore(b,a))})(window,document,"script","https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js");
(function(a,b,c,d){b.getElementById("avivid_css")||(a=b.getElementsByTagName("head")[0],b=b.createElement(c),b.id="avivid_css",b.type="text/css",b.rel="stylesheet",b.href=d,a.appendChild(b),b.addEventListener("load",function(){AviviD.status.avivid_css=1}))})(window,document,"link","https://avivid.likr.tw/avivid_css/avivid_pseudo_native_subscribe/avivid_pseudo_native_subscribe.css");
"undefined"===typeof UAParser&&function(a,b){var c={extend:function(a,b){var c={},d;for(d in a)c[d]=b[d]&&0===b[d].length%2?b[d].concat(a[d]):a[d];return c},has:function(a,b){return"string"===typeof a?-1!==b.toLowerCase().indexOf(a.toLowerCase()):!1},lowerize:function(a){return a.toLowerCase()},major:function(a){return"string"===typeof a?a.replace(/[^\d\.]/g,"").split(".")[0]:b},trim:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},d=function(a,c){for(var d=0,e,f,k,g,m,h;d<
c.length&&!m;){var p=c[d],l=c[d+1];for(e=f=0;e<p.length&&!m;)if(m=p[e++].exec(a))for(k=0;k<l.length;k++)h=m[++f],g=l[k],"object"===typeof g&&0<g.length?2==g.length?this[g[0]]="function"==typeof g[1]?g[1].call(this,h):g[1]:3==g.length?this[g[0]]="function"!==typeof g[1]||g[1].exec&&g[1].test?h?h.replace(g[1],g[2]):b:h?g[1].call(this,h,g[2]):b:4==g.length&&(this[g[0]]=h?g[3].call(this,h.replace(g[1],g[2])):b):this[g]=h?h:b;d+=2}},e=function(a,d){for(var e in d)if("object"===typeof d[e]&&0<d[e].length)for(var f=
0;f<d[e].length;f++){if(c.has(d[e][f],a))return"?"===e?b:e}else if(c.has(d[e],a))return"?"===e?b:e;return a},f={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2E3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},k={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],["name","version"],[/(opios)[\/\s]+([\w\.]+)/i],[["name","Opera Mini"],"version"],
[/\s(opr)\/([\w\.]+)/i],[["name","Opera"],"version"],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],["name","version"],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[["name","IE"],"version"],[/(edge)\/((\d+)?[\w\.]+)/i],["name",
"version"],[/(yabrowser)\/([\w\.]+)/i],[["name","Yandex"],"version"],[/(puffin)\/([\w\.]+)/i],[["name","Puffin"],"version"],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[["name","UCBrowser"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(micromessenger)\/([\w\.]+)/i],[["name","WeChat"],"version"],[/(QQ)\/([\d\.]+)/i],["name","version"],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],["name","version"],[/xiaomi\/miuibrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],
[/;fbav\/([\w\.]+);/i],["version",["name","Facebook"]],[/(headlesschrome) ([\w\.]+)/i],["version",["name","Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[["name",/(.+)/,"$1 WebView"],"version"],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[["name",/(.+(?:g|us))(.+)/,"$1 $2"],"version"],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],["version",["name","Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],["name","version"],[/(dolfin)\/([\w\.]+)/i],
[["name","Dolphin"],"version"],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[["name","Chrome"],"version"],[/(coast)\/([\w\.]+)/i],[["name","Opera Coast"],"version"],[/fxios\/([\w\.-]+)/i],["version",["name","Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],["version",["name","Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],["version","name"],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],["name",["version",e,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416",
"2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape)\/([\w\.-]+)/i],[["name","Netscape"],"version"],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,
/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],["name","version"]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",c.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",c.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],
[["architecture",c.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],["model","vendor",["type","tablet"]],[/applecoremedia\/[\w\.]+ \((ipad)/],["model",["vendor","Apple"],["type","tablet"]],[/(apple\s{0,1}tv)/i],[["model","Apple TV"],["vendor","Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],["vendor","model",["type","tablet"]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],
["model",["vendor","Amazon"],["type","tablet"]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[["model",e,{"Fire Phone":["SD","KF"]}],["vendor","Amazon"],["type","mobile"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],["model","vendor",["type","mobile"]],[/\((ip[honed|\s\w*]+);/i],["model",["vendor","Apple"],["type","mobile"]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],["vendor",
"model",["type","mobile"]],[/\(bb10;\s(\w+)/i],["model",["vendor","BlackBerry"],["type","mobile"]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],["model",["vendor","Asus"],["type","tablet"]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[["vendor","Sony"],["model","Xperia Tablet"],["type","tablet"]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],["model",["vendor","Sony"],["type","mobile"]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],["vendor","model",
["type","console"]],[/android.+;\s(shield)\sbuild/i],["model",["vendor","Nvidia"],["type","console"]],[/(playstation\s[34portablevi]+)/i],["model",["vendor","Sony"],["type","console"]],[/(sprint\s(\w+))/i],[["vendor",e,{HTC:"APA",Sprint:"Sprint"}],["model",e,{"Evo Shift 4G":"7373KT"}],["type","mobile"]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],["vendor","model",["type","tablet"]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],
["vendor",["model",/_/g," "],["type","mobile"]],[/(nexus\s9)/i],["model",["vendor","HTC"],["type","tablet"]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],["model",["vendor","Huawei"],["type","mobile"]],[/(microsoft);\s(lumia[\s\w]+)/i],["vendor","model",["type","mobile"]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],["model",["vendor","Microsoft"],["type","console"]],[/(kin\.[onetw]{3})/i],[["model",/\./g," "],["vendor","Microsoft"],["type","mobile"]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,
/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],["model",["vendor","Motorola"],["type","mobile"]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],["model",["vendor","Motorola"],["type","tablet"]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[["vendor",c.trim],["model",c.trim],["type","smarttv"]],[/hbbtv.+maple;(\d+)/i],[["model",/^/,"SmartTV"],["vendor","Samsung"],["type","smarttv"]],[/\(dtv[\);].+(aquos)/i],["model",["vendor","Sharp"],["type","smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,
/((SM-T\w+))/i],[["vendor","Samsung"],"model",["type","tablet"]],[/smart-tv.+(samsung)/i],["vendor",["type","smarttv"],"model"],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[["vendor","Samsung"],"model",["type","mobile"]],[/sie-(\w+)*/i],["model",["vendor","Siemens"],["type","mobile"]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[["vendor","Nokia"],"model",["type","mobile"]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],
["model",["vendor","Acer"],["type","tablet"]],[/android.+([vl]k\-?\d{3})\s+build/i],["model",["vendor","LG"],["type","tablet"]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[["vendor","LG"],"model",["type","tablet"]],[/(lg) netcast\.tv/i],["vendor","model",["type","smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],["model",["vendor","LG"],["type","mobile"]],[/android.+(ideatab[a-z0-9\-\s]+)/i],["model",["vendor","Lenovo"],["type","tablet"]],[/linux;.+((jolla));/i],
["vendor","model",["type","mobile"]],[/((pebble))app\/[\d\.]+\s/i],["vendor","model",["type","wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],["vendor","model",["type","mobile"]],[/crkey/i],[["model","Chromecast"],["vendor","Google"]],[/android.+;\s(glass)\s\d/i],["model",["vendor","Google"],["type","wearable"]],[/android.+;\s(pixel c)\s/i],["model",["vendor","Google"],["type","tablet"]],[/android.+;\s(pixel xl|pixel)\s/i],["model",["vendor","Google"],["type","mobile"]],[/android.+(\w+)\s+build\/hm\1/i,
/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","mobile"]],[/android.+;\s(m[1-5]\snote)\sbuild/i],["model",["vendor","Meizu"],["type","tablet"]],[/android.+a000(1)\s+build/i],["model",["vendor","OnePlus"],["type","mobile"]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],["model",["vendor","RCA"],["type","tablet"]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],["model",["vendor",
"Dell"],["type","tablet"]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],["model",["vendor","Verizon"],["type","tablet"]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[["vendor","Barnes & Noble"],"model",["type","tablet"]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],["model",["vendor","NuVision"],["type","tablet"]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[["vendor","ZTE"],"model",["type","tablet"]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],["model",["vendor","Swiss"],
["type","mobile"]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],["model",["vendor","Swiss"],["type","tablet"]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],["model",["vendor","Zeki"],["type","tablet"]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[["vendor","Dragon Touch"],"model",["type","tablet"]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],["model",["vendor","Insignia"],["type","tablet"]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],["model",
["vendor","NextBook"],["type","tablet"]],[/android.+[;\/]\s*(Xtreme_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[["vendor","Voice"],"model",["type","mobile"]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[["vendor","LvTel"],"model",["type","mobile"]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],["model",["vendor","Envizen"],["type","tablet"]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],["vendor","model",["type","tablet"]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],
["model",["vendor","MachSpeed"],["type","tablet"]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],["vendor","model",["type","tablet"]],[/android.+[;\/]\s*TU_(1491)\s+build/i],["model",["vendor","Rotor"],["type","tablet"]],[/android.+(KS(.+))\s+build/i],["model",["vendor","Amazon"],["type","tablet"]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],["vendor","model",["type","tablet"]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[["type",c.lowerize],"vendor","model"],[/(android.+)[;\/].+build/i],
["model",["vendor","Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],["version",["name","EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],["name","version"],[/rv:([\w\.]+).*(gecko)/i],["version","name"]],os:[[/microsoft\s(windows)\s(vista|xp)/i],["name","version"],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],
["name",["version",e,f]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",e,f]],[/\((bb)(10);/i],[["name","BlackBerry"],"version"],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],["name","version"],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[["name","Symbian"],"version"],[/\((series40);/i],["name"],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name",
"Firefox OS"],"version"],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],["name","version"],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(sunos)\s?([\w\.]+\d)*/i],[["name","Solaris"],"version"],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],
["name","version"],[/(haiku)\s(\w+)/i],["name","version"],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[["version",/_/g,"."],["name","iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[["name","Mac OS"],["version",/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],["name","version"]]},h=function(a,b){this.name=a;this.version=
b},r=function(a){this.architecture=a},v=function(a,b,c){this.vendor=a;this.model=b;this.type=c},l=function(e,f){"object"===typeof e&&(f=e,e=b);if(!(this instanceof l))return(new l(e,f)).getResult();var m=e||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),p=f?c.extend(k,f):k,n=new h,q=new r,g=new v,t=new h,u=new h;this.getBrowser=function(){d.call(n,m,p.browser);n.major=c.major(n.version);return n};this.getCPU=function(){d.call(q,m,p.cpu);return q};this.getDevice=function(){d.call(g,
m,p.device);return g};this.getEngine=function(){d.call(t,m,p.engine);return t};this.getOS=function(){d.call(u,m,p.os);return u};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}};this.getUA=function(){return m};this.setUA=function(a){m=a;n=new h;q=new r;g=new v;t=new h;u=new h;return this};return this};l.VERSION="0.7.14";l.BROWSER={NAME:"name",MAJOR:"major",VERSION:"version"};l.CPU={ARCHITECTURE:"architecture"};
l.DEVICE={MODEL:"model",VENDOR:"vendor",TYPE:"type",CONSOLE:"console",MOBILE:"mobile",SMARTTV:"smarttv",TABLET:"tablet",WEARABLE:"wearable",EMBEDDED:"embedded"};l.ENGINE={NAME:"name",VERSION:"version"};l.OS={NAME:"name",VERSION:"version"};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=l),exports.UAParser=l):"function"===typeof define&&define.amd?a.UAParser=l:a&&(a.UAParser=l);var n=a&&(a.jQuery||a.Zepto);if("undefined"!==typeof n){var q=new l;n.ua=
q.getResult();n.ua.get=function(){return q.getUA()};n.ua.set=function(a){q.setUA(a);a=q.getResult();for(var b in a)n.ua[b]=a[b]}}}("object"===typeof window?window:this);
window.AviviD&&!document.querySelector("#web_push, #avivid_push_banner")&&(AviviD.version="v5.6.190904",AviviD.status.debug=window.avivid_debug||0,AviviD.avivid_regid=window.avivid_regid||"_",AviviD.status.avivid_regid=AviviD.avivid_regid,AviviD.avivid_tag=window.avivid_tag||"_",AviviD.status.avivid_tag=AviviD.avivid_tag,AviviD.UAParser=new UAParser,AviviD.UAResult=AviviD.UAParser.getResult(),AviviD.construct=function(a){window.jQuery&&!AviviD.empty(AviviD.uuid)?a():setTimeout(function(){AviviD.construct(a)},
50)},AviviD.main=function(){AviviD.set_is_likr();AviviD.str_os_type=AviviD.detect_os_type();AviviD.int_os_type=AviviD.trans_os_type_to_number(AviviD.str_os_type);AviviD.str_browser_type=AviviD.detect_browser_type();AviviD.int_browser_type=AviviD.trans_browser_type_to_number(AviviD.str_browser_type);AviviD.webuserid=AviviD.get_webuserid();AviviD.client_href=encodeURIComponent(window.location.href);AviviD.ajax_data={web_id:AviviD.web_id,category_id:AviviD.category_id,uuid:AviviD.uuid,webuserid:AviviD.webuserid,
os_type:AviviD.int_os_type,browser_type:AviviD.int_browser_type,client_href:window.location.href,version:AviviD.version};AviviD.geolocation={latitude:null,longitude:null,get_interval:1E4};AviviD.get_website_info()},AviviD.get_urlparam=function(a){a=new RegExp("(^|&)"+a+"=([^&]*)(&|$)");a=window.location.search.substr(1).match(a);return null!=a?unescape(a[2]):null},AviviD.get_uuid=function(){AviviD.status.is_new_user_uuid="0";if(AviviD.get_urlparam("likr_id"))try{var a=window.atob(AviviD.get_urlparam("likr_id"));
AviviD.set_cookie("AviviD_uuid",a);AviviD.set_cookie("uuid",a);AviviD.status.is_new_user_uuid="1";AviviD.uuid=a}catch(b){AviviD.set_cookie("AviviD_uuid","")}if(AviviD.get_cookie("AviviD_single_push_uuid_reset"))return AviviD.get_cookie("AviviD_uuid");window.addEventListener("message",function(a){AviviD.uuid_origin=a.origin;if("https://load-balancer.likr.com.tw"===AviviD.uuid_origin){var b=a.data.split(",");a=b[0];b=b[1]||0;AviviD.set_cookie("AviviD_uuid",a);AviviD.status.is_new_user_uuid="1";AviviD.uuid=
a;"1"==b&&AviviD.set_cookie("AviviD_single_push_uuid_reset","1")}},!1);a=document.createElement("iframe");a.src="https://load-balancer.likr.com.tw/pushEndPoint/subscribe/v2/api/uuid_iframe.php";a.style="display:none";document.body.appendChild(a)},AviviD.get_webuserid=function(){var a=AviviD.get_cookie("webuserid");AviviD.status.is_new_user_webuserid="0";a||(a=AviviD.gen_webuserid(),AviviD.set_cookie("webuserid",a),AviviD.status.is_new_user_webuserid="1");return a},AviviD.gen_webuserid=function(){var a=
function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},AviviD.get_website_info=function(){AviviD.settings.string_ring_icon=localStorage.getItem("avivid_string_ring_icon");AviviD.settings.sw_type=localStorage.getItem("avivid_sw_type");AviviD.settings.channel_id=localStorage.getItem("avivid_channel_id");AviviD.settings.push_banner_data_title=localStorage.getItem("avivid_push_banner_data_title");AviviD.settings.push_banner_data_content=
localStorage.getItem("avivid_push_banner_data_content");AviviD.settings.push_banner_data_interval=localStorage.getItem("avivid_push_banner_data_interval");AviviD.settings.push_banner_data_position=localStorage.getItem("avivid_push_banner_data_position");AviviD.settings.ring_position_top=localStorage.getItem("avivid_ring_position_top");AviviD.settings.ring_position_bottom=localStorage.getItem("avivid_ring_position_bottom");AviviD.settings.ring_position_left=localStorage.getItem("avivid_ring_position_left");
AviviD.settings.ring_position_right=localStorage.getItem("avivid_ring_position_right");AviviD.settings.show_ring_after_subscribed=localStorage.getItem("avivid_show_ring_after_subscribed");AviviD.settings.show_ring=localStorage.getItem("avivid_show_ring");AviviD.settings.ring_size_height=localStorage.getItem("avivid_ring_size_height");AviviD.settings.ring_size_width=localStorage.getItem("avivid_ring_size_width");AviviD.settings.banner_allow_btn=localStorage.getItem("avivid_banner_allow_btn");AviviD.settings.banner_cancel_btn=
localStorage.getItem("avivid_banner_cancel_btn");AviviD.settings.fb_banner_title=localStorage.getItem("avivid_fb_banner_title");AviviD.settings.fb_banner_content=localStorage.getItem("avivid_fb_banner_content");AviviD.settings.fb_banner_icon=localStorage.getItem("avivid_fb_banner_icon");AviviD.settings.add_ecommerce_listener=localStorage.getItem("avivid_add_ecommerce_listener");AviviD.settings.string_banner_icon=localStorage.getItem("avivid_string_banner_icon");AviviD.settings.ring_position_mtop=
localStorage.getItem("avivid_ring_position_mtop");AviviD.settings.ring_position_mbottom=localStorage.getItem("avivid_ring_position_mbottom");AviviD.settings.ring_position_mleft=localStorage.getItem("avivid_ring_position_mleft");AviviD.settings.ring_position_mright=localStorage.getItem("avivid_ring_position_mright");AviviD.settings.show_fb_banner=localStorage.getItem("avivid_show_fb_banner");AviviD.settings.pc_show_ring=localStorage.getItem("avivid_pc_show_ring");AviviD.settings.pc_show_banner=localStorage.getItem("avivid_pc_show_banner");
AviviD.settings.mobile_show_ring=localStorage.getItem("avivid_mobile_show_ring");AviviD.settings.mobile_show_banner=localStorage.getItem("avivid_mobile_show_banner");AviviD.settings.banner_follow_specify_id=localStorage.getItem("avivid_banner_follow_specify_id");AviviD.settings.banner_follow_specify_class=localStorage.getItem("avivid_banner_follow_specify_class");AviviD.settings.banner_inread_class=localStorage.getItem("avivid_banner_inread_class");AviviD.settings.banner_inread_id=localStorage.getItem("avivid_banner_inread_id");
AviviD.settings.banner_follow_specify_m_id=localStorage.getItem("avivid_banner_follow_specify_m_id");AviviD.settings.banner_follow_specify_m_class=localStorage.getItem("avivid_banner_follow_specify_m_class");AviviD.settings.banner_inread_m_class=localStorage.getItem("avivid_banner_inread_m_class");AviviD.settings.banner_inread_m_id=localStorage.getItem("avivid_banner_inread_m_id");AviviD.settings.switch_language=localStorage.getItem("avivid_switch_language");AviviD.settings.ios_enable=localStorage.getItem("avivid_ios_enable");
AviviD.settings.banner_cancel_twice_exp_day=localStorage.getItem("avivid_banner_cancel_twice_exp_day");AviviD.settings.native_enable=localStorage.getItem("avivid_native_enable");AviviD.settings.track_behavior_enable=localStorage.getItem("avivid_track_behavior_enable");AviviD.settings.ip_enable=localStorage.getItem("avivid_ip_enable");AviviD.settings.payment_selector=localStorage.getItem("avivid_payment_selector");AviviD.settings.payment_selector_m=localStorage.getItem("avivid_payment_selector_m");
AviviD.settings.payment_url=localStorage.getItem("avivid_payment_url");AviviD.settings.payment_url_m=localStorage.getItem("avivid_payment_url_m");AviviD.settings.checkout_url=localStorage.getItem("avivid_checkout_url");AviviD.settings.checkout_url_m=localStorage.getItem("avivid_checkout_url_m");AviviD.settings.checkout_trigger_class=localStorage.getItem("avivid_checkout_trigger_class");AviviD.settings.checkout_trigger_class_m=localStorage.getItem("avivid_checkout_trigger_class_m");AviviD.settings.checkout_data_class=
localStorage.getItem("avivid_checkout_data_class");AviviD.settings.checkout_data_class_m=localStorage.getItem("avivid_checkout_data_class_m");AviviD.settings.cart_url=localStorage.getItem("avivid_cart_url");AviviD.settings.cart_url_m=localStorage.getItem("avivid_cart_url_m");AviviD.settings.cart_data_class=localStorage.getItem("avivid_cart_data_class");AviviD.settings.cart_data_class_m=localStorage.getItem("avivid_cart_data_class_m");AviviD.settings.number_url=localStorage.getItem("avivid_number_url");
AviviD.settings.number_url_m=localStorage.getItem("avivid_number_url_m");AviviD.settings.number_trigger_class=localStorage.getItem("avivid_number_trigger_class");AviviD.settings.number_trigger_class_m=localStorage.getItem("avivid_number_trigger_class_m");AviviD.settings.number_data_id=localStorage.getItem("avivid_number_data_id");AviviD.settings.number_data_id_m=localStorage.getItem("avivid_number_data_id_m");AviviD.settings.geolocation_enable=localStorage.getItem("avivid_geolocation_enable");AviviD.settings.pwa_enable=
localStorage.getItem("avivid_pwa_enable");AviviD.settings.console_enable=localStorage.getItem("avivid_console_enable");AviviD.settings.SENDER_ID=localStorage.getItem("avivid_sender_id");AviviD.update_time=localStorage.getItem("avivid_update_time");AviviD.settings.banner_native=localStorage.getItem("avivid_banner_native");AviviD.empty(AviviD.update_time)?(AviviD.status.update_time="_",AviviD.status.is_update_time_expired=!0):(AviviD.status.update_time=AviviD.convert_timestamp_to_time(AviviD.update_time),
6048E5<(new Date).getTime()-AviviD.update_time?AviviD.status.is_update_time_expired=!0:AviviD.status.is_update_time_expired=!1);AviviD.status.is_update_time_expired||AviviD.empty(AviviD.settings.string_ring_icon)||AviviD.empty(AviviD.settings.sw_type)||AviviD.empty(AviviD.settings.channel_id)||AviviD.empty(AviviD.settings.push_banner_data_title)||AviviD.empty(AviviD.settings.push_banner_data_content)||AviviD.empty(AviviD.settings.push_banner_data_interval)||AviviD.empty(AviviD.settings.push_banner_data_position)||
AviviD.empty(AviviD.settings.ring_position_top)||AviviD.empty(AviviD.settings.ring_position_bottom)||AviviD.empty(AviviD.settings.ring_position_left)||AviviD.empty(AviviD.settings.ring_position_right)||AviviD.empty(AviviD.settings.show_ring_after_subscribed)||AviviD.empty(AviviD.settings.show_ring)||AviviD.empty(AviviD.settings.fb_banner_title)||AviviD.empty(AviviD.settings.fb_banner_content)||AviviD.empty(AviviD.settings.fb_banner_icon)||AviviD.empty(AviviD.settings.add_ecommerce_listener)||AviviD.empty(AviviD.settings.string_banner_icon)||
AviviD.empty(AviviD.settings.ring_position_mtop)||AviviD.empty(AviviD.settings.ring_position_mbottom)||AviviD.empty(AviviD.settings.ring_position_mleft)||AviviD.empty(AviviD.settings.ring_position_mright)||AviviD.empty(AviviD.settings.show_fb_banner)||AviviD.empty(AviviD.settings.pc_show_ring)||AviviD.empty(AviviD.settings.pc_show_banner)||AviviD.empty(AviviD.settings.mobile_show_ring)||AviviD.empty(AviviD.settings.mobile_show_banner)||AviviD.empty(AviviD.settings.banner_follow_specify_id)||AviviD.empty(AviviD.settings.banner_follow_specify_class)||
AviviD.empty(AviviD.settings.banner_inread_class)||AviviD.empty(AviviD.settings.banner_inread_id)||AviviD.empty(AviviD.settings.banner_follow_specify_m_id)||AviviD.empty(AviviD.settings.banner_follow_specify_m_class)||AviviD.empty(AviviD.settings.banner_inread_m_class)||AviviD.empty(AviviD.settings.banner_inread_m_id)||AviviD.empty(AviviD.settings.banner_allow_btn)||AviviD.empty(AviviD.settings.banner_cancel_btn)||AviviD.empty(AviviD.settings.ring_size_height)||AviviD.empty(AviviD.settings.ring_size_width)||
AviviD.empty(AviviD.settings.ios_enable)||AviviD.empty(AviviD.settings.banner_cancel_twice_exp_day)||AviviD.empty(AviviD.settings.switch_language)||AviviD.empty(AviviD.settings.native_enable)||AviviD.empty(AviviD.settings.track_behavior_enable)||AviviD.empty(AviviD.settings.ip_enable)||AviviD.empty(AviviD.settings.payment_selector)||AviviD.empty(AviviD.settings.payment_selector_m)||AviviD.empty(AviviD.settings.payment_url)||AviviD.empty(AviviD.settings.payment_url_m)||AviviD.empty(AviviD.settings.checkout_url)||
AviviD.empty(AviviD.settings.checkout_url_m)||AviviD.empty(AviviD.settings.checkout_trigger_class)||AviviD.empty(AviviD.settings.checkout_trigger_class_m)||AviviD.empty(AviviD.settings.checkout_data_class)||AviviD.empty(AviviD.settings.checkout_data_class_m)||AviviD.empty(AviviD.settings.cart_url)||AviviD.empty(AviviD.settings.cart_url_m)||AviviD.empty(AviviD.settings.cart_data_class)||AviviD.empty(AviviD.settings.cart_data_class_m)||AviviD.empty(AviviD.settings.number_url)||AviviD.empty(AviviD.settings.number_url_m)||
AviviD.empty(AviviD.settings.number_trigger_class)||AviviD.empty(AviviD.settings.number_trigger_class_m)||AviviD.empty(AviviD.settings.number_data_id)||AviviD.empty(AviviD.settings.number_data_id_m)||AviviD.empty(AviviD.settings.geolocation_enable)||AviviD.empty(AviviD.settings.pwa_enable)||AviviD.empty(AviviD.settings.console_enable)||AviviD.empty(AviviD.settings.SENDER_ID)||AviviD.empty(AviviD.settings.banner_native)||"1"==AviviD.settings.banner_native?AviviD.status.do_update=!0:AviviD.status.do_update=
!1;AviviD.status.do_update?(JSON.stringify(AviviD.ajax_data),jQuery.ajax({type:"POST",url:"https://avivid.likr.tw/settings_file/"+AviviD.category_id+".csv",credentials:"same-origin",dataType:"text",success:function(a){a=a.split("\n");var b=a[0].split(",");a=a[1].split(",").reduce(function(a,d,e){a[b[e]]=d;return a},{});"_"==a.sender_id&&(a.sender_id="912321621860");AviviD.status.get_website_info="1";"1"==AviviD.status.get_website_info?(AviviD.settings.string_ring_icon=a.ring_icon,AviviD.settings.sw_type=
a.sw_type,AviviD.settings.channel_id=a.channel_id,AviviD.settings.push_banner_data_title=a.banner_title,AviviD.settings.push_banner_data_content=a.banner_content,AviviD.settings.push_banner_data_interval=a.banner_interval_mins,AviviD.settings.push_banner_data_position=a.banner_position,AviviD.settings.ring_position_top=a.ring_position_top,AviviD.settings.ring_position_bottom=a.ring_position_bottom,AviviD.settings.ring_position_left=a.ring_position_left,AviviD.settings.ring_position_right=a.ring_position_right,
AviviD.settings.show_ring_after_subscribed=a.ring_display,AviviD.settings.show_ring=a.show_ring,AviviD.settings.ring_size_height=a.ring_size_height,AviviD.settings.ring_size_width=a.ring_size_width,AviviD.settings.banner_allow_btn=a.banner_allow_btn,AviviD.settings.banner_cancel_btn=a.banner_cancel_btn,AviviD.settings.fb_banner_title=a.fb_banner_title,AviviD.settings.fb_banner_content=a.fb_banner_content,AviviD.settings.fb_banner_icon=a.fb_banner_icon,AviviD.settings.add_ecommerce_listener=a.add_ecommerce_listener,
AviviD.settings.string_banner_icon=a.banner_icon,AviviD.settings.ring_position_mtop=a.ring_position_mtop,AviviD.settings.ring_position_mbottom=a.ring_position_mbottom,AviviD.settings.ring_position_mleft=a.ring_position_mleft,AviviD.settings.ring_position_mright=a.ring_position_mright,AviviD.settings.show_fb_banner=a.show_fb_banner,AviviD.settings.pc_show_ring=a.pc_show_ring,AviviD.settings.pc_show_banner=a.pc_show_banner,AviviD.settings.mobile_show_ring=a.mobile_show_ring,AviviD.settings.mobile_show_banner=
a.mobile_show_banner,AviviD.settings.banner_follow_specify_id=a.banner_follow_specify_id,AviviD.settings.banner_follow_specify_class=a.banner_follow_specify_class,AviviD.settings.banner_inread_class=a.banner_inread_class,AviviD.settings.banner_inread_id=a.banner_inread_id,AviviD.settings.switch_language=a.switch_language,AviviD.settings.banner_follow_specify_m_id=a.banner_follow_specify_m_id,AviviD.settings.banner_follow_specify_m_class=a.banner_follow_specify_m_class,AviviD.settings.banner_inread_m_class=
a.banner_inread_m_class,AviviD.settings.banner_inread_m_id=a.banner_inread_m_id,AviviD.settings.ios_enable=a.ios_enable,AviviD.settings.banner_cancel_twice_exp_day=a.banner_click_cancel_twice_interval_days,AviviD.settings.native_enable=a.native_enable,AviviD.settings.track_behavior_enable=a.track_behavior_enable,AviviD.settings.ip_enable=a.ip_enable,AviviD.settings.payment_selector=a.payment_selector,AviviD.settings.payment_selector_m=a.payment_selector_m,AviviD.settings.payment_url=a.payment_url,
AviviD.settings.payment_url_m=a.payment_url_m,AviviD.settings.checkout_url=a.checkout_url,AviviD.settings.checkout_url_m=a.checkout_url_m,AviviD.settings.checkout_trigger_class=a.checkout_trigger_class,AviviD.settings.checkout_trigger_class_m=a.checkout_trigger_class_m,AviviD.settings.checkout_data_class=a.checkout_data_class,AviviD.settings.checkout_data_class_m=a.checkout_data_class_m,AviviD.settings.cart_url=a.cart_url,AviviD.settings.cart_url_m=a.cart_url_m,AviviD.settings.cart_data_class=a.cart_data_class,
AviviD.settings.cart_data_class_m=a.cart_data_class_m,AviviD.settings.number_url=a.number_url,AviviD.settings.number_url_m=a.number_url_m,AviviD.settings.number_trigger_class=a.number_trigger_class,AviviD.settings.number_trigger_class_m=a.number_trigger_class_m,AviviD.settings.number_data_id=a.number_data_id,AviviD.settings.number_data_id_m=a.number_data_id_m,AviviD.settings.geolocation_enable=a.geolocation_enable,AviviD.settings.pwa_enable=a.pwa_enable,AviviD.settings.console_enable=a.console_enable,
AviviD.settings.SENDER_ID=a.sender_id,AviviD.settings.banner_native=a.banner_native,AviviD.update_time=(new Date).getTime(),AviviD.status.update_time=AviviD.convert_timestamp_to_time(AviviD.update_time),localStorage.setItem("avivid_string_ring_icon",AviviD.settings.string_ring_icon),localStorage.setItem("avivid_sw_type",AviviD.settings.sw_type),localStorage.setItem("avivid_channel_id",AviviD.settings.channel_id),localStorage.setItem("avivid_push_banner_data_title",AviviD.settings.push_banner_data_title),
localStorage.setItem("avivid_push_banner_data_content",AviviD.settings.push_banner_data_content),localStorage.setItem("avivid_push_banner_data_interval",AviviD.settings.push_banner_data_interval),localStorage.setItem("avivid_push_banner_data_position",AviviD.settings.push_banner_data_position),localStorage.setItem("avivid_ring_position_top",AviviD.settings.ring_position_top),localStorage.setItem("avivid_ring_position_bottom",AviviD.settings.ring_position_bottom),localStorage.setItem("avivid_ring_position_left",
AviviD.settings.ring_position_left),localStorage.setItem("avivid_ring_position_right",AviviD.settings.ring_position_right),localStorage.setItem("avivid_show_ring_after_subscribed",AviviD.settings.show_ring_after_subscribed),localStorage.setItem("avivid_show_ring",AviviD.settings.show_ring),localStorage.setItem("avivid_ring_size_height",AviviD.settings.ring_size_height),localStorage.setItem("avivid_ring_size_width",AviviD.settings.ring_size_width),localStorage.setItem("avivid_banner_allow_btn",AviviD.settings.banner_allow_btn),
localStorage.setItem("avivid_banner_cancel_btn",AviviD.settings.banner_cancel_btn),localStorage.setItem("avivid_fb_banner_title",AviviD.settings.fb_banner_title),localStorage.setItem("avivid_fb_banner_content",AviviD.settings.fb_banner_content),localStorage.setItem("avivid_fb_banner_icon",AviviD.settings.fb_banner_icon),localStorage.setItem("avivid_add_ecommerce_listener",AviviD.settings.add_ecommerce_listener),localStorage.setItem("avivid_string_banner_icon",AviviD.settings.string_banner_icon),localStorage.setItem("avivid_ring_position_mtop",
AviviD.settings.ring_position_mtop),localStorage.setItem("avivid_ring_position_mbottom",AviviD.settings.ring_position_mbottom),localStorage.setItem("avivid_ring_position_mleft",AviviD.settings.ring_position_mleft),localStorage.setItem("avivid_ring_position_mright",AviviD.settings.ring_position_mright),localStorage.setItem("avivid_show_fb_banner",AviviD.settings.show_fb_banner),localStorage.setItem("avivid_pc_show_ring",AviviD.settings.pc_show_ring),localStorage.setItem("avivid_pc_show_banner",AviviD.settings.pc_show_banner),
localStorage.setItem("avivid_mobile_show_ring",AviviD.settings.mobile_show_ring),localStorage.setItem("avivid_mobile_show_banner",AviviD.settings.mobile_show_banner),localStorage.setItem("avivid_banner_follow_specify_id",AviviD.settings.banner_follow_specify_id),localStorage.setItem("avivid_banner_follow_specify_class",AviviD.settings.banner_follow_specify_class),localStorage.setItem("avivid_banner_inread_class",AviviD.settings.banner_inread_class),localStorage.setItem("avivid_banner_inread_id",AviviD.settings.banner_inread_id),
localStorage.setItem("avivid_banner_follow_specify_m_id",AviviD.settings.banner_follow_specify_m_id),localStorage.setItem("avivid_banner_follow_specify_m_class",AviviD.settings.banner_follow_specify_m_class),localStorage.setItem("avivid_banner_inread_m_class",AviviD.settings.banner_inread_m_class),localStorage.setItem("avivid_banner_inread_m_id",AviviD.settings.banner_inread_m_id),localStorage.setItem("avivid_switch_language",AviviD.settings.switch_language),localStorage.setItem("avivid_ios_enable",
AviviD.settings.ios_enable),localStorage.setItem("avivid_banner_cancel_twice_exp_day",AviviD.settings.banner_cancel_twice_exp_day),localStorage.setItem("avivid_native_enable",AviviD.settings.native_enable),localStorage.setItem("avivid_track_behavior_enable",AviviD.settings.track_behavior_enable),localStorage.setItem("avivid_ip_enable",AviviD.settings.ip_enable),localStorage.setItem("avivid_payment_selector",AviviD.settings.payment_selector),localStorage.setItem("avivid_payment_selector_m",AviviD.settings.payment_selector_m),
localStorage.setItem("avivid_payment_url",AviviD.settings.payment_url),localStorage.setItem("avivid_payment_url_m",AviviD.settings.payment_url_m),localStorage.setItem("avivid_checkout_url",AviviD.settings.checkout_url),localStorage.setItem("avivid_checkout_url_m",AviviD.settings.checkout_url_m),localStorage.setItem("avivid_checkout_trigger_class",AviviD.settings.checkout_trigger_class),localStorage.setItem("avivid_checkout_trigger_class_m",AviviD.settings.checkout_trigger_class_m),localStorage.setItem("avivid_checkout_data_class",
AviviD.settings.checkout_data_class),localStorage.setItem("avivid_checkout_data_class_m",AviviD.settings.checkout_data_class_m),localStorage.setItem("avivid_cart_url",AviviD.settings.cart_url),localStorage.setItem("avivid_cart_url_m",AviviD.settings.cart_url_m),localStorage.setItem("avivid_cart_data_class",AviviD.settings.cart_data_class),localStorage.setItem("avivid_cart_data_class_m",AviviD.settings.cart_data_class_m),localStorage.setItem("avivid_number_url",AviviD.settings.number_url),localStorage.setItem("avivid_number_url_m",
AviviD.settings.number_url_m),localStorage.setItem("avivid_number_trigger_class",AviviD.settings.number_trigger_class),localStorage.setItem("avivid_number_trigger_class_m",AviviD.settings.number_trigger_class_m),localStorage.setItem("avivid_number_data_id",AviviD.settings.number_data_id),localStorage.setItem("avivid_number_data_id_m",AviviD.settings.number_data_id_m),localStorage.setItem("avivid_geolocation_enable",AviviD.settings.geolocation_enable),localStorage.setItem("avivid_pwa_enable",AviviD.settings.pwa_enable),
localStorage.setItem("avivid_console_enable",AviviD.settings.console_enable),localStorage.setItem("avivid_sender_id",AviviD.settings.SENDER_ID),localStorage.setItem("avivid_update_time",AviviD.update_time),localStorage.setItem("avivid_banner_native",AviviD.settings.banner_native),"1"===AviviD.settings.track_behavior_enable&&AviviD.run_tracking_data(),AviviD.switch_show_mode(),"_"!=AviviD.settings.checkout_url&&("1"==AviviD.settings.add_ecommerce_listener?window.addEventListener("click",function(){AviviD.run_get_shopping_data()}):
AviviD.run_get_shopping_data())):AviviD.console("AviviD get_website_info : status => "+a.status+", resText => "+a.resText)},error:function(a,b,c){AviviD.console("jqXHR :",a);AviviD.console("textStatus :",b);AviviD.console("errorThrown :",c)}})):(AviviD.status.get_website_info="0","1"===AviviD.settings.track_behavior_enable&&AviviD.run_tracking_data(),AviviD.switch_show_mode(),"_"!=AviviD.settings.checkout_url&&("1"==AviviD.settings.add_ecommerce_listener?window.addEventListener("click",function(){AviviD.run_get_shopping_data()}):
AviviD.run_get_shopping_data()))},AviviD.switch_show_mode=function(){"0"==AviviD.settings.ios_enable&&"2"==AviviD.int_os_type?AviviD.console("AviviD : iOS is disabled."):"1"===AviviD.settings.native_enable&&AviviD.webpush_scheme_native()},AviviD.protocol_firebase_accept=function(){return"http:"==location.protocol?!1:!0},AviviD.webpush_scheme_native=function(){sw_series_browser=["Chrome","Firefox","Samsung Browser"];AviviD.in_array(AviviD.str_browser_type,sw_series_browser)?(AviviD.debugLog("sw_series_browser:",
AviviD.str_browser_type),AviviD.protocol_firebase_accept()&&AviviD.loadFirebase()):"Safari"==AviviD.str_browser_type?"1"!=AviviD.status.subscribe_status?(AviviD.debugLog("apns:",AviviD.str_browser_type),"2"==AviviD.settings.banner_native?"1"!=AviviD.get_cookie("AviviD_already_exist")&&AviviD.safari_banner_subscribe(AviviD.settings.string_banner_icon,AviviD.settings.push_banner_data_title,AviviD.settings.push_banner_data_content,AviviD.settings.banner_allow_btn,AviviD.settings.banner_cancel_btn):AviviD.regSafari()):
(AviviD.debugLog("apns:",AviviD.str_browser_type),AviviD.debugLog("regSafari:","Subscribed"),AviviD.requestGeolocation()):AviviD.debugLog("AviviD: this browser is not supported push notification")},AviviD.empty=function(a){if("number"==typeof a||"boolean"==typeof a)return!1;if("null"===a||"undefined"===a||"undefined"==typeof a||null===a)return!0;if("undefined"!=typeof a.length)return 0==a.length;var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return 0==b},AviviD.get_top_domain=function(){var a=window.location.hostname;
if(/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/.test(a))return a;var b=a.split(".").length,c=a.split(".").reverse();return"2">=b?a:"3"==b?"com"===c[1]?a:c[1]+"."+c[0]:"4"==b?"com"===c[0]?c[1]+"."+c[0]:c[2]+"."+c[1]+"."+c[0]:c[2]+"."+c[1]+"."+c[0]},AviviD.set_cookie=function(a,b,c){var d=AviviD.get_top_domain();c=c||3650;var e=new Date;e.setTime(e.getTime()+864E5*c);document.cookie=a+"="+escape(b)+";expires="+e.toGMTString()+";domain="+d+";path=/"},AviviD.set_cookie_minutes=function(a,b,c){var d=
AviviD.get_top_domain();c=c||60;var e=new Date;e.setTime(e.getTime()+6E4*c);document.cookie=a+"="+escape(b)+";expires="+e.toGMTString()+";domain="+d+";path=/"},AviviD.set_cookie_days=function(a,b,c){var d=AviviD.get_top_domain();c=c||30;var e=new Date;e.setTime(e.getTime()+864E5*c);document.cookie=a+"="+escape(b)+";expires="+e.toGMTString()+";domain="+d+";path=/"},AviviD.get_cookie=function(a){a=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!=a?unescape(a[2]):null},AviviD.delete_cookie=
function(a){var b=new Date;b.setTime(b.getTime()-1);var c=AviviD.get_cookie(a);null!=c&&(document.cookie=a+"="+c+";expires="+b.toGMTString())},AviviD.detect_os_type=function(){return AviviD.UAResult.os.name},AviviD.trans_os_type_to_number=function(a){switch(a){case "Android":return"1";case "iOS":return"2";case "Mac OS":return"3";case "Windows":return"4";default:return"9"}},AviviD.trans_browser_type_to_number=function(a){switch(a){case "Chrome":return"1";case "Firefox":return"2";case "Safari":return"3";
case "iOS":return"4";case "IE":return"5";case "Edge":return"6";case "Samsung Browser":return"8";default:return"9"}},AviviD.detect_browser_type=function(){var a=null!=navigator.userAgent.match(/line/i),b="iOS"==AviviD.UAResult.os.name;return a?"LINE":b?"iOS":AviviD.UAResult.browser.name},AviviD.convert_timestamp_to_time=function(a){var b=function(a,d){return a.length>=d?a:b("0"+a,d)};a=new Date(Number(a));return a.getFullYear().toString()+"/"+b((a.getMonth()+1).toString(),2)+"/"+b(a.getDate().toString(),
2)+" "+b(a.getHours().toString(),2)+":"+b(a.getMinutes().toString(),2)+":"+b(a.getSeconds().toString(),2)},AviviD.detect_is_mobile=function(a){return"Android"==a||"iOS"==a?!0:!1},AviviD.detect_is_numeric=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},AviviD.in_array=function(a,b){for(var c=b.length,d=0;d<c;d++)if(b[d]==a)return!0;return!1},AviviD.console=function(a,b){"1"==AviviD.settings.console_enable&&console.log(a,void 0===b?"":b)},AviviD.loadFirebase=function(){var a=function(){window.firebase?
AviviD.firebaseInit():function(a,b,e,f){a=b.getElementsByTagName(e)[0]||b.getElementsByTagName("head")[0];var c=b.createElement(e);c.type="text/javascript";c.src=f;a.parentNode.insertBefore(c,a);c.addEventListener("load",function r(){c.removeEventListener("load",r,!1);AviviD.firebaseInit()},!1)}(window,document,"script",b)};if(navigator.serviceWorker.controller)if(navigator.serviceWorker.controller.scriptURL.match(/.*\/firebase-messaging-sw.js$/))if("1"==AviviD.settings.pwa_enable){var b="https://avivid.likr.tw/pushEndPoint/js/firebasejs/4.1.3/firebase.js";
window.addEventListener("beforeinstallprompt",AviviD.registerPWAEvent);a()}else b="https://www.gstatic.com/firebasejs/4.1.3/firebase.js",navigator.serviceWorker.getRegistration().then(function(b){b.unregister();AviviD.status.subscribe_status="0";a()});else b="https://www.gstatic.com/firebasejs/4.1.3/firebase.js",a();else navigator.serviceWorker.getRegistrations().then(function(c){var d=0,e=null;if("1"!=AviviD.settings.pwa_enable)d=2;else{c=$jscomp.makeIterator(c);for(var f=c.next();!f.done;f=c.next())f=
f.value,f.scope.match(/.*\/firebase-cloud-messaging-push-scope$/)?(d|=1,e=f):f.scope.match(/.*\/$/)&&(d|=2)}switch(d){case 0:case 1:e&&e.unregister();b="https://avivid.likr.tw/pushEndPoint/js/firebasejs/4.1.3/firebase.js";AviviD.status.subscribe_status="0";window.addEventListener("beforeinstallprompt",AviviD.registerPWAEvent);break;case 2:case 3:b="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"}a()})},AviviD.registerPWAEvent=function(a){a.prompt();a.userChoice.then(function(a){"accepted"===
a.outcome?AviviD.console("User accepted the A2HS prompt"):AviviD.console("User dismissed the A2HS prompt")})},AviviD.firebaseInit=function(){AviviD.firebaseApp=firebase.initializeApp({messagingSenderId:AviviD.settings.SENDER_ID},"AviviD");AviviD.console("AviviD.firebaseApp Init: "+AviviD.firebaseApp.name);AviviD.messaging=AviviD.firebaseApp.messaging();"1"!=AviviD.status.subscribe_status?"0"==AviviD.settings.banner_native||"2"==AviviD.settings.banner_native?0==(null!=AviviD.get_cookie("AviviD_already_exist")?
AviviD.get_cookie("AviviD_already_exist"):0)?AviviD.requestPermissionFCM():AviviD.console("AviviD token exist"):"1"==AviviD.settings.banner_native&&"1"!=AviviD.get_cookie("AviviD_already_exist")&&AviviD.bannerPermission():(AviviD.console("AviviD.firebaseApp : Subscribed."),AviviD.requestGeolocation());AviviD.messaging.onMessage(function(a){AviviD.console("Message received. ",a);var b=a.data;navigator.serviceWorker.getRegistrations().then(function(a){AviviD.console("getRegistrations :",a);if(a){var c=
a[0];AviviD.console("useServiceWorker :",c);AviviD.messaging.getToken().then(function(a){if(a){AviviD.console("currentToken : "+a);var d=AviviD.getNotificationData(a,b);AviviD.console("pushData : ",d);AviviD.verifyMessage(b)?(a=AviviD.createUrlObject("https://load-balancer.likr.com.tw/pushServer/impression_log_receiver.php",{web_id:b.web_id,category_id:b.category_id,token:a,push_id:b.push_id,msg_source:b.msg_source,sw_source:self.location.origin}),AviviD.console("IMPRESSION_LOG_RECIEVER urlObject :",
a),fetch(a).then(function(a){if(200!==a.status)throw Error("IMPRESSION_LOG_RECIEVER error code: "+a.status);return a.json()}).then(function(a){return AviviD.console("IMPRESSION_LOG_RECIEVER res:",a)})["catch"](function(a){return console.error("IMPRESSION_LOG_RECIEVER error:",a)})):console.error("Message: Missing Parameters.");return c.showNotification(d.title,d.content)}console.error("getToken: No Instance ID token available. Request permission to generate one.")})["catch"](function(a){console.error("getToken :",
a)})}})})},AviviD.requestPermissionFCM=function(){AviviD.messaging.requestPermission().then(function(){AviviD.console("Notification permission granted.");AviviD.messaging.getToken().then(function(a){if(a){var b=AviviD.UAResult;a={web_id:AviviD.web_id,token:a,category_id:AviviD.category_id,avivid_regid:AviviD.avivid_regid,webuserid:AviviD.webuserid,uuid:AviviD.uuid,reg_source:"native",sw_type:"fcm",browser_ver:b.browser.version,os_ver:b.os.version,user_agent:b.ua,client_href:window.location.href,os_type:AviviD.int_os_type,
browser_type:AviviD.int_browser_type,avivid_tag:AviviD.avivid_tag};AviviD.console("FCM Register send:",a);jQuery.ajax({url:"https://load-balancer.likr.com.tw/pushServer/endPointReg_v2.php",type:"POST",data:a,dataType:"json",success:function(a){AviviD.console("FCM Register res:",a);a.is_insert_success&&(AviviD.set_cookie("AviviD_already_exist","1"),a=a.resText.split("#"),a[1]&&AviviD.set_cookie("sub_to",a[1]))},error:function(a,b,e){AviviD.console("xhr :",a);AviviD.console("ajaxOptions :",b);AviviD.console("thrownError :",
e);AviviD.console("status code : "+a.status+" , ajaxOptions : "+b)}})}else AviviD.console("No Instance ID token available. Request permission to generate one.");AviviD.requestGeolocation()})["catch"](function(a){AviviD.console("An error occurred while retrieving token. ",a)})})["catch"](function(a){AviviD.console("Unable to get permission to notify.",a);AviviD.set_cookie("AviviD_already_exist","1");AviviD.requestGeolocation()})},AviviD.requestGeolocation=function(){"1"==AviviD.settings.geolocation_enable&&
navigator&&navigator.geolocation&&setTimeout(function(){navigator.geolocation.watchPosition(function(a){AviviD.geolocation.latitude=a.coords.latitude;AviviD.geolocation.longitude=a.coords.longitude})},AviviD.geolocation.get_interval)},AviviD.regSafari=function(){if("safari"in window&&"pushNotification"in window.safari){var a=AviviD.web_id,b=AviviD.UAResult,c="web.tw.com.likr."+a,d={domainName:a},e=function(a){"default"===a.permission?(window.safari.pushNotification.requestPermission("https://www.likr.com.tw/pushosx",
c,d,e),AviviD.console("\u8a0a\u606f\u901a\u77e5\u72c0\u614b\uff1a\u9810\u8a2d"),AviviD.console("regSafari: ",a)):"denied"===a.permission?(AviviD.console("\u8a0a\u606f\u901a\u77e5\u72c0\u614b\uff1a\u5c01\u9396"),AviviD.set_cookie("AviviD_already_exist","1")):"granted"===a.permission&&(AviviD.console("\u8a0a\u606f\u901a\u77e5\u72c0\u614b\uff1a\u5141\u8a31"),AviviD.set_cookie("AviviD_already_exist","1"),a=a.deviceToken,localStorage.setItem("avivid_safari_token",a),AviviD.console("The user granted, with token: "+
a),a={web_id:AviviD.web_id,token:a,category_id:AviviD.category_id,avivid_regid:AviviD.avivid_regid,webuserid:AviviD.webuserid,uuid:AviviD.uuid,reg_source:"native",sw_type:"safari",browser_ver:b.browser.version,os_ver:b.os.version,user_agent:b.ua,client_href:window.location.href,os_type:AviviD.int_os_type,browser_type:AviviD.int_browser_type,avivid_tag:AviviD.avivid_tag},AviviD.console("regSafari Register send:",a),jQuery.ajax({url:"https://load-balancer.likr.com.tw/pushServer/endPointReg_v2.php",
type:"POST",data:a,success:function(a){AviviD.console("regSafari Register res:",a)},error:function(a,b,c){AviviD.console("xhr :",a);AviviD.console("ajaxOptions :",b);AviviD.console("thrownError :",c);AviviD.console("status code : "+a.status+" , ajaxOptions : "+b)}}));AviviD.requestGeolocation()};a=window.safari.pushNotification.permission(c);e(a)}},AviviD.debugLog=function(a,b){AviviD.status.debug&&AviviD.console(a,b||"")},AviviD.isHasActionButton=function(a){return"object"!==typeof a?0:a.button1_url||
a.button2_url?1:0},AviviD.verifyMessage=function(a){return a.web_id&&a.push_id&&a.msg_source?1:0},AviviD.getNotificationData=function(a,b){var c={title:"\u6b61\u8fce\u4f7f\u7528\u4f86\u5ba2\u63a8\u64ad\u7cfb\u7d71",content:{body:"\u9ede\u64ca\u89c0\u770b\u66f4\u591a\u8cc7\u8a0a",icon:"https://www.likr.com.tw/pushEndPoint/images/avivid/image/icon.png",requireInteraction:!0,data:{click_url:"https://www.likr.com.tw/",web_id:AviviD.web_id,token:a,push_id:"",msg_source:"error"}}};if(!b.push_id)return console.error("notificationDataError: data.push_id not existed, use defaultData."),
c;var d={};d.title=b.title?b.title:c.title;var e={};e.body=b.body?b.body:c.content.body;e.icon=b.icon?b.icon:c.content.icon;e.image=b.image?b.image:"";e.requireInteraction="false"==b.requireInteraction?!1:!0;e.renotify="true"==b.renotify?!0:!1;e.silent="true"==b.silent?!0:!1;e.tag=b.tag?b.tag:"";e.data={web_id:b.web_id,category_id:b.category_id?b.category_id:"",token:a,push_id:b.push_id,click_url:b.click_url?b.click_url:c.content.data.click_url,button1_url:b.button1_url,button2_url:b.button2_url,
msg_source:b.msg_source};c=[];b.button1_title&&c.push({action:"button1",title:b.button1_title,icon:b.button1_icon?b.button1_icon:""});b.button2_title&&c.push({action:"button2",title:b.button2_title,icon:b.button2_icon?b.button2_icon:""});0<c.length&&(e.actions=c);e.image||delete e.image;d.content=e;return d},AviviD.createUrlObject=function(a,b){var c=new URL(a);Object.keys(b).forEach(function(a){return c.searchParams.append(a,b[a])});return c},AviviD.tracking_data_ajax=function(a,b,c,d,e,f,k){null!==
AviviD.geolocation.latitude&&null!==AviviD.geolocation.longitude&&(e=AviviD.geolocation.latitude+";"+AviviD.geolocation.longitude);a=JSON.stringify({web_id:AviviD.web_id,uuid:AviviD.uuid,behavior_type:a,referrer_url:b,current_url:c,click_url:d,user_ip:e,os_type:f,browser_type:k});jQuery.ajax({type:"POST",data:{json_data:a},url:"https://elephant.likr.com.tw/elephant_api/php_redis.php",dataType:"json",success:function(a){},error:function(a,b,c){}})},AviviD.tracking_job=function(){AviviD.tracking_data_ajax("landing",
document.referrer,window.location.href,"_",AviviD.clientIP,AviviD.int_os_type,AviviD.int_browser_type);AviviD.track_click_event=window.addEventListener("click",function(a){a=a.target.href;var b=window.location.href;void 0!==a&&AviviD.tracking_data_ajax("click","_",b,a,AviviD.clientIP,AviviD.int_os_type,AviviD.int_browser_type)},!1);AviviD.track_leave_event=window.addEventListener("beforeunload",function(a){AviviD.tracking_data_ajax("leave","_",window.location.href,"_",AviviD.clientIP,AviviD.int_os_type,
AviviD.int_browser_type)},!1)},AviviD.run_tracking_data=function(){1==AviviD.settings.ip_enable?jQuery.ajax({url:"https://load-balancer.likr.com.tw/pushServer/get_client_ip_for_ring.php",type:"POST",dataType:"json",success:function(a){AviviD.clientIP=a;AviviD.tracking_job()},error:function(a,b,c){}}):(AviviD.clientIP="_",AviviD.tracking_job())},AviviD.send_shopping_information=function(a,b){var c={shopping_type:a,web_id:AviviD.web_id,uuid:AviviD.uuid,shopping_info:b,category_id:AviviD.category_id,
is_likr:AviviD.get_cookie("is_likr"),AviviD_cid:AviviD.get_cookie("AviviD_cid")};c=JSON.stringify(c);jQuery.ajax({type:"POST",data:{data:c},url:"https://elephant.likr.com.tw/elephant_api/php_redis_shopping.php",dataType:"json",success:function(a){},error:function(a,b,c){}})},AviviD.set_is_likr=function(){if(AviviD.get_urlparam("is_likr")){var a=AviviD.get_top_domain();a="is_likr="+AviviD.get_urlparam("is_likr")+";domain="+a+";path=/";document.cookie=a}},AviviD.run_get_shopping_data=function(){AviviD.settings.payment_selector=
AviviD.detect_is_mobile(AviviD.str_os_type)?AviviD.settings.payment_selector_m:AviviD.settings.payment_selector;AviviD.settings.payment_url=AviviD.detect_is_mobile(AviviD.str_os_type)?AviviD.settings.payment_url_m:AviviD.settings.payment_url;AviviD.settings.checkout_url=AviviD.detect_is_mobile(AviviD.str_os_type)?AviviD.settings.checkout_url_m:AviviD.settings.checkout_url;AviviD.settings.checkout_trigger_class=AviviD.detect_is_mobile(AviviD.str_os_type)?AviviD.settings.checkout_trigger_class_m:AviviD.settings.checkout_trigger_class;
AviviD.settings.checkout_data_class=AviviD.detect_is_mobile(AviviD.str_os_type)?AviviD.settings.checkout_data_class_m:AviviD.settings.checkout_data_class;AviviD.settings.cart_url=AviviD.detect_is_mobile(AviviD.str_os_type)?AviviD.settings.cart_url_m:AviviD.settings.cart_url;AviviD.settings.cart_data_class=AviviD.detect_is_mobile(AviviD.str_os_type)?AviviD.settings.cart_data_class_m:AviviD.settings.cart_data_class;AviviD.settings.number_url=AviviD.detect_is_mobile(AviviD.str_os_type)?AviviD.settings.number_url_m:
AviviD.settings.number_url;AviviD.settings.number_trigger_class=AviviD.detect_is_mobile(AviviD.str_os_type)?AviviD.settings.number_trigger_class_m:AviviD.settings.number_trigger_class;AviviD.settings.number_data_id=AviviD.detect_is_mobile(AviviD.str_os_type)?AviviD.settings.number_data_id_m:AviviD.settings.number_data_id;window.location.href.slice(0,AviviD.settings.checkout_url.length)==AviviD.settings.checkout_url&&void 0==document.querySelector(AviviD.settings.payment_selector)?void 0!=document.querySelector(AviviD.settings.checkout_trigger_class)?
AviviD.get_checkout_data=document.querySelector(AviviD.settings.checkout_trigger_class).addEventListener("click",function(){AviviD.set_cookie_days("AviviD_cid",AviviD.uuid+"-"+(new Date).getTime(),1);var a=JSON.stringify(document.querySelector(AviviD.settings.checkout_data_class).innerHTML);AviviD.send_shopping_information("checkout",a)}):setTimeout(function(){AviviD.run_get_shopping_data()},1E3):window.location.href.slice(0,AviviD.settings.cart_url.length)==AviviD.settings.cart_url?setTimeout(function(){if(void 0!=
document.querySelector(AviviD.settings.cart_data_class)&&null!=document.querySelector(AviviD.settings.cart_data_class)){var a=JSON.stringify(document.querySelector(AviviD.settings.cart_data_class).innerHTML);AviviD.send_shopping_information("cart",a)}else setTimeout(function(){AviviD.run_get_shopping_data()},1E3)},1E3):window.location.href.slice(0,AviviD.settings.payment_url.length)==AviviD.settings.payment_url&&"_"==AviviD.settings.payment_selector?AviviD.send_shopping_information("paid",0):window.location.href.slice(0,
AviviD.settings.payment_url.length)==AviviD.settings.payment_url&&"_"!=AviviD.settings.payment_selector?void 0!=document.querySelector(AviviD.settings.payment_selector)?AviviD.send_shopping_information("paid",0):setTimeout(function(){AviviD.run_get_shopping_data()},1E3):window.location.href.slice(0,AviviD.settings.number_url.length)==AviviD.settings.number_url&&(void 0!=document.querySelector(AviviD.settings.number_trigger_class)?AviviD.get_number_data=document.querySelector(AviviD.settings.number_trigger_class).addEventListener("click",
function(){var a="";if(void 0!=document.querySelector(AviviD.settings.number_data_id).length){for(var b=0;b<document.querySelector(AviviD.settings.number_data_id).length;b++)a=a+document.querySelector(AviviD.settings.number_data_id)[b].name+":"+document.querySelector(AviviD.settings.number_data_id)[b].value+",";a=JSON.stringify(a)}else a=JSON.stringify(document.querySelector(AviviD.settings.number_data_id).innerHTML);AviviD.send_shopping_information("number",a)}):setTimeout(function(){AviviD.run_get_shopping_data()},
1E3))},AviviD.set_token_subscribe=function(a){0==(null!=AviviD.get_cookie("AviviD_already_exist")?AviviD.get_cookie("AviviD_already_exist"):0)?AviviD.get_cookie("AviviD_token")?AviviD.console("repeat"):(AviviD.set_cookie("AviviD_token",a),jQuery.ajax({type:"POST",data:{token:a,web_id:AviviD.web_id,category_id:AviviD.category_id,uuid:AviviD.uuid,os_type:AviviD.int_os_type,browser_type:AviviD.int_browser_type,ip:void 0!=AviviD.clientIP?AviviD.clientIP:"_",browser_ver:AviviD.UAResult.browser.version,
os_ver:AviviD.UAResult.os.version,detect:AviviD.UAResult.ua,client_href:JSON.stringify(window.location.href)},url:"https://webpush-api02.likr.com.tw/pushServer/insert_subscribe_token.php",success:function(a){AviviD.console(a);AviviD.set_cookie("AviviD_already_exist","1")},error:function(a,c,d){AviviD.console("jqXHR :",a);AviviD.console("textStatus :",c);AviviD.console("errorThrown :",d)}})):AviviD.console("token exist")},AviviD.bannerPermission=function(){var a=JSON.stringify({web_id:AviviD.web_id});
jQuery.ajax({url:"https://load-balancer.likr.com.tw/pushEndPoint/banner_subscribe.php",type:"POST",dataType:"json",data:{json_data:a},success:function(a){AviviD.console(a);var b=a[0].banner_icon,d=a[0].banner_title;a=a[0].banner_content;AviviD.banner_subscribe(b,d,a,AviviD.settings.banner_allow_btn,AviviD.settings.banner_cancel_btn);AviviD.console(b);AviviD.console(d);AviviD.console(a)},error:function(a,c,d){}})},AviviD.safari_banner_subscribe=function(a,b,c,d,e){jQuery("head").append('<style type="text/css">.avivid_push_banner{top: 0;left: 30%;padding: 20px 20px;box-shadow: 0 1px 2px gray;color: #222;position: fixed;z-index: 999999;width: 400px;height: 130px;border:1px #AAAAAA;background-color:#f0f0f0;-webkit-box-sizing:revert;-moz-box-sizing:revert;box-sizing:revert;}</style>');
jQuery("head").append('<style type="text/css">.avivid_icon{height: 100px; width:100px;}</style>');jQuery("head").append('<style type="text/css">.avivid_button_1{position: relative;bottom: -30px;left:200px;width:100px;height:30px;font-family:DFKai-sb;font-size:16px;font-weight:bold;border-radius:10px;background-color:#0066FF;color: white;outline:none;}</style>');jQuery("head").append('<style type="text/css">.avivid_button_2{position: relative;bottom: -30px;left:-10px;width:100px;height:30px;font-family:DFKai-sb;font-size:16px;font-weight:bold;border-radius:10px;background-color:#f0f0f0;color: black;outline:none;}</style>');
jQuery("head").append('<style type="text/css">.avivid_title{position: relative;left:120px;top:-140px;word-break:break-all;width:280px;font-weight:bold;font-family:DFKai-sb;}');jQuery("head").append('<style type="text/css">.avivid_content{position: relative;left:120px;top:-130px;word-break:break-all;width:280px;font-family:DFKai-sb;}');var f=document.createElement("div");f.setAttribute("id","avivid_requestPermission");f.setAttribute("class","avivid_push_banner");f.style.display="block";var k=document.createElement("img");
k.setAttribute("class","avivid_icon");k.setAttribute("src",a);a=document.createElement("input");a.setAttribute("class","avivid_button_1");a.setAttribute("type","button");a.setAttribute("onclick","AviviD.trigger_safari_requestPermission('access')");a.setAttribute("value",d);d=document.createElement("input");d.setAttribute("class","avivid_button_2");d.setAttribute("type","button");d.setAttribute("onclick","AviviD.trigger_safari_requestPermission('denied')");d.setAttribute("value",e);e=document.createElement("p");
e.setAttribute("style","bottom: 0px; font-size: 10px;");e.innerHTML="Powered by likr\u00ae";var h=document.createElement("p");h.setAttribute("class","avivid_title");h.innerHTML=b;b=document.createElement("p");b.setAttribute("class","avivid_content");b.innerHTML=c;AviviD.console(f);AviviD.console(document.body);document.body.appendChild(f);f.appendChild(k);f.appendChild(a);f.appendChild(d);f.appendChild(e);f.appendChild(h);f.appendChild(b)},AviviD.banner_subscribe=function(a,b,c,d,e){jQuery("head").append('<style type="text/css">.avivid_push_banner{top: 0;left: 40%;padding: 20px 20px;;box-shadow: 0 1px 3px gray;color: #222;position: fixed;z-index: 999999;width: 400px;height: 150px;border:1px #AAAAAA solid;background-color:#DDDDDD;}@media(max-width: 480px){.avivid_push_banner{top: 68%;left: 4%;padding: 20px 20px;;box-shadow: 0 1px 3px gray;color: #222;position: fixed;z-index: 999999;width: 290px;height: 130px;border:1px #AAAAAA solid;background-color:#DDDDDD;}}</style>');
jQuery("head").append('<style type="text/css">.avivid_icon{height: 100px; width:100px;} </style>');jQuery("head").append('<style type="text/css">.avivid_button_1{position: relative;bottom: -50px;left:200px;width:100px;background-color:#0066FF;color: white;outline:none;}@media(max-width: 480px){.avivid_button_1{position: relative;bottom: 0px;left:0px;width:110px;background-color:#0066FF;color: white;outline:none;}}</style>');jQuery("head").append('<style type="text/css">.avivid_button_2{position: relative;bottom: -50px;left:-10px;width:100px;background-color:#FFFFFF;color: black;outline:none;}@media(max-width: 480px){.avivid_button_2{position: relative;bottom: -30px;left:-90px;width:70px;background-color:#FFFFFF;color: black;outline:none;}}</style>');
jQuery("head").append('<style type="text/css">.avivid_title{position: relative;left:100px;top:-140px;word-break:break-all;width:280px;}@media (max-width: 480px){.avivid_title{position: relative;left:100px;top:-140px;word-break:break-all;width:200px;}}');jQuery("head").append('<style type="text/css">.avivid_content{position: relative;left:100px;top:-130px;word-break:break-all;width:280px;}@media (max-width: 480px){.avivid_content{position: relative;left:100px;top:-150px;word-break:break-all;width:200px;}}');
var f=document.createElement("div");f.setAttribute("id","avivid_requestPermission");f.setAttribute("class","avivid_push_banner");f.style.display="block";var k=document.createElement("img");k.setAttribute("class","avivid_icon");k.setAttribute("src",a);a=document.createElement("input");a.setAttribute("class","avivid_button_1");a.setAttribute("type","button");a.setAttribute("onclick","AviviD.trigger_requestPermission('access')");a.setAttribute("value",d);d=document.createElement("input");d.setAttribute("class",
"avivid_button_2");d.setAttribute("type","button");d.setAttribute("onclick","AviviD.trigger_requestPermission('denied')");d.setAttribute("value",e);e=document.createElement("p");e.setAttribute("style","position:relative; bottom: 0px; font-size: 10px;");e.innerHTML="Powered by likr\u00ae";var h=document.createElement("p");h.setAttribute("class","avivid_title");h.innerHTML=b;b=document.createElement("p");b.setAttribute("class","avivid_content");b.innerHTML=c;AviviD.console(f);AviviD.console(document.body);
document.body.appendChild(f);f.appendChild(k);f.appendChild(a);f.appendChild(d);f.appendChild(e);f.appendChild(h);f.appendChild(b)},AviviD.trigger_safari_requestPermission=function(a){"access"==a?(document.getElementById("avivid_requestPermission").style.display="none",0==(null!=AviviD.get_cookie("AviviD_already_exist")?AviviD.get_cookie("AviviD_already_exist"):0)?AviviD.regSafari():AviviD.console("AviviD token exist")):document.getElementById("avivid_requestPermission").style.display="none"},AviviD.trigger_requestPermission=
function(a){"access"==a?(document.getElementById("avivid_requestPermission").style.display="none",0==(null!=AviviD.get_cookie("AviviD_already_exist")?AviviD.get_cookie("AviviD_already_exist"):0)?AviviD.requestPermissionFCM():AviviD.console("AviviD token exist")):document.getElementById("avivid_requestPermission").style.display="none"},AviviD.popcorn_exist=function(a){if(100>a++)if(document.getElementById("AviviD_popcorn")||document.getElementById("AviviD_popcorn_list_button")){var b=document.createElement("script");
b.src="https://workhouse.likr.tw/popcorn/js/popcorn.js";document.getElementsByTagName("head")[0].appendChild(b)}else setTimeout(function(){AviviD.popcorn_exist(a)},50)},AviviD.popcorn_ready=function(a){if("function"===typeof AviviD.main_popcorn)AviviD.main_popcorn();else{if(100<a)return 0;setTimeout(function(){AviviD.popcorn_ready(a+1)},100)}},AviviD.coupon_controller=function(){var a=JSON.stringify({web_id:AviviD.web_id});jQuery.ajax({url:"https://atlas.likr.app/api/get_coupon_controller.php",type:"POST",
dataType:"json",data:{json_data:a},success:function(a){AviviD.console(a);1==a?document.getElementById("AviviD_iframe_achang_middle")&&(document.getElementById("AviviD_iframe_achang_middle").style.display="block"):2==a?document.getElementById("Avivid_iframe_atlas_achang_div")&&(document.getElementById("Avivid_iframe_atlas_achang_div").style.display="block"):3==a&&(document.getElementById("AviviD_iframe_achang_middle").style.display="block",document.getElementById("Avivid_iframe_atlas_achang_div").style.display=
"block")},error:function(a,c,d){}})},AviviD.coupon_flag=function(){window.postMessage&&(window.attachEvent?window.attachEvent("onmessage",function(a){var b="popcorn1",c=document.getElementById(b);0===parseInt(a.data,10)?document.getElementById(b).contentWindow.postMessage("getHeight","*"):0<a.data.toString().indexOf("px")&&(b=parseInt(a.data,10),isNaN(b)||(c.height=b+"px"),isNaN(b)||(c.className="popcorn_dynamic"));b="popcorn2";c=document.getElementById(b);0===parseInt(a.data,10)?document.getElementById(b).contentWindow.postMessage("getHeight",
"*"):0<a.data.toString().indexOf("px")&&(b=parseInt(a.data,10),isNaN(b)||(c.height=b+"px"),isNaN(b)||(c.className="popcorn_dynamic"));b="Avivid_iframe_atlas";0===parseInt(a.data,10)?document.getElementById(b).contentWindow.postMessage("getcoupon_mode","*"):0<a.data.toString().indexOf("coupon_mode")&&(coupon_flag=b=parseInt(a.data,10),0<coupon_flag&&(document.getElementById("atlas_iframe").style.display="block"))}):window.addEventListener("message",function(a){var b="popcorn1";document.getElementById(b);
if(0===parseInt(a.data,10))document.getElementById(b).contentWindow.postMessage("getHeight","*");else if(0<a.data.toString().indexOf("px")){var c=a.data.split("_");b=document.getElementById(c[0]);c=parseInt(c[1],10);isNaN(c)||(b.height=c+"px");isNaN(c)||(b.className="popcorn_dynamic")}b="popcorn2";document.getElementById(b);0===parseInt(a.data,10)?document.getElementById(b).contentWindow.postMessage("getHeight","*"):0<a.data.toString().indexOf("px")&&(c=a.data.split("_"),b=document.getElementById(c[0]),
c=parseInt(c[1],10),isNaN(c)||(b.height=c+"px"),isNaN(c)||(b.className="popcorn_dynamic"));b="Avivid_iframe_atlas";0===parseInt(a.data,10)?document.getElementById(b).contentWindow.postMessage("getcoupon_mode","*"):0<a.data.toString().indexOf("coupon_mode")&&(coupon_flag=c=parseInt(a.data,10),0<coupon_flag&&(document.getElementById("atlas_iframe").style.display="block"))},!1))},AviviD.uuid=AviviD.get_uuid(),AviviD.coupon_flag(),AviviD.construct(AviviD.main),(document.getElementById("Avivid_iframe_atlas_achang_div")||
document.getElementById("AviviD_iframe_achang_middle"))&&setTimeout(function(){AviviD.coupon_controller()},1E3));AviviD.popcorn_exist(0);AviviD.popcorn_ready(0);